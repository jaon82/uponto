function DesktopNotifications(){permission=this.checkPermission()}function notificationClick(){null!=clickUrl&&window.open(clickUrl)}function updateSource(a,b){var a=$(a);a.attr("src",b).appendTo(a.parent())}var permission=null,clickUrl=null;DesktopNotifications.prototype.teste=function(){alert("Classe DesktopNotifications.")},DesktopNotifications.prototype.checkPermission=function(){var a={isOK:!1,msg:""};return"Notification"in window?"granted"===Notification.permission?(a.msg="Notificações suportadas e permissão concedida pelo usuário.",a.isOK=!0):"denied"!==Notification.permission&&Notification.requestPermission(function(b){"permission"in Notification||(Notification.permission=b),"granted"===b&&(a.msg="Notificações suportadas e permissão concedida pelo usuário.",a.isOK=!0)}):(a.msg="Este browser não oferece suporte para notificações de desktop",a.isOK=!1),a},DesktopNotifications.prototype.checkPermissionDirect=function(){var a=this.checkPermission();if(a.isOK){var b="Controle de Banco de Horas",c={body:a.msg,icon:"res/icon.png"};this.create(b,c,null,"tardis")}else alert(a.msg)},DesktopNotifications.prototype.create=function(a,b,c,d){if(permission.isOK){null==a&&(a="Controle de Banco de Horas");var e=new Notification(a,b);if(d.length>0)if("default"==d)document.getElementById("alarm-sound").play();else switch(d){case"five":document.getElementById("alarm-sound-five").play();break;case"ten":document.getElementById("alarm-sound-ten").play();break;case"chimes":document.getElementById("alarm-sound-chimes").play();break;default:document.getElementById("alarm-sound-tardis").play()}null!=c&&(clickUrl=c,e.onclick=notificationClick)}else confirm("Você ainda não autorizou o uso de notificações.\nDeseja revisar as pemissões?")&&(permission=this.checkPermission())};