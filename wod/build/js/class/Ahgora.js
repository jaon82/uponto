function Ahgora(a,b,c,d,e,f,g,h,i){IMPORT_URL="http://khi.by/projetos/pontoconn/";var j=null,k=null,l=null;if(_dao=e,_helpers=d,_dateHelpers=_helpers.dateTime,openLightbox=f,closeLightbox=g,buildMonth=h,initNotifTimer=i,null==a||null==b||null==c){var m="Informe sua Matrícula, Senha e Empresa nas Configurações antes de realizar a importação.";$("#msg-lightbox-content").html(m),closeLightbox("#perform-update"),openLightbox("#msg-lightbox")}else j=a,k=b,l=c,IMPORT_URL+="?m="+j+"&s="+k+"&e="+l}Ahgora.prototype.teste=function(){alert("Classe Ahgora.")},Ahgora.prototype.checkSettings=function(){if(null==matricula||null==senha||null==empresa){var a="Informe sua Matrícula, Senha e Empresa nas Configurações antes de realizar a importação.";return $("#msg-lightbox-content").html(a),closeLightbox("#perform-update"),openLightbox("#msg-lightbox"),!1}return!0},Ahgora.prototype.import=function(a,b,c){openLightbox("#perform-update"),this.checkSettings();var d=new Date,e=d.getDate();null==c&&e>11&&(a=parseInt(a)+1),a=parseInt(a),0==a&&(a=1),parseInt(a)<10&&(a="0"+a),null==c&&(c=0);var f=IMPORT_URL+"&mes="+a+"&ano="+b+"&day="+c+"&type=json&di=0";console.log(f),$.get(f,function(a,b,d){if(200!=d.status)closeLightbox("#perform-update"),openLightbox("#error-update");else if(a)for(var e,f=0;f<=a.length;f++){e=a[f];for(var g in e){var h=e[g].batidas.texto;if(h.length>0){var i=e[g].data,j=i.substr(0,2),k=i.substr(3,2),l=i.substr(6,4);10>j&&(j=j.substr(1,1)),10>k&&(k=k.substr(1,1)),k=parseInt(k)-1;{var m=new Date(l,k,j),n=new Date,o=n.getMonth(),p=n.getFullYear(),q=n.getDate();new Date(p,o,q)}if(c=parseInt(c),j=parseInt(j),0==c||c==j){var r=e[g].batidas.registros,s=m.getTime(),t=localStorage.getItem(s);if(null==t||c==j){var u={entrada:r[0]?_dateHelpers.parseDateTime(r[0],m):0,ida_almoco:r[1]?_dateHelpers.parseDateTime(r[1],m):0,volta_almoco:r[2]?_dateHelpers.parseDateTime(r[2],m):0,saida:r[3]?_dateHelpers.parseDateTime(r[3],m):0,vpn:0,obs:"Batidas originais: "+h,ausent:!1};_dao.storeDate(m,u)}}}}}else console.log("Importação falhou."),closeLightbox("#perform-update"),openLightbox("#error-update");closeLightbox("#perform-update")},"json").fail(function(){closeLightbox("#perform-update"),openLightbox("#error-update")}).done(function(){buildMonth(),window.location.reload()})};