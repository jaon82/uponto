<!DOCTYPE html>
<html>

<head>
	<title>Controle de Banco de Horas</title>
	<meta content="text/html; charset=utf-8" http-equiv="content-type" />
	<link rel="shortcut icon" href="res/favicon.ico" type="image/x-icon">
	<link rel="stylesheet" type="text/css" href="css/oocss.css" />
	<link rel="stylesheet" type="text/css" href="css/common.css" />
	<link rel="stylesheet" type="text/css" media="print" href="css/print.css" />
	<link rel="stylesheet" type="text/css" href="libs/jquery-ui/smoothness/jquery-ui-1.10.4.custom.min.css" />

	<script src="libs/jquery-1.11.0.min.js"></script>
	<script src="libs/jquery.json-2.3.min.js"></script>
	<script src="libs/jquery.maskedinput-1.3.js"></script>
	<script src="libs/jquery-ui/jquery-ui-1.10.4.custom.min.js"></script>
	
	<script src="js/class/Utils.js"></script>
	<script src="js/class/DesktopNotifications.js"></script>
	<script src="js/class/Ahgora.js"></script>
	<script src="js/class/Timers.js"></script>
	
	<script src="js/extensions.js"></script>
	<script src="js/hrs.helpers.js"></script>
	<script src="js/hrs.dao.js"></script>
	<script src="js/hrs.timestamp.js"></script>
	<script src="js/hrs.ui.month.js"></script>
	<script src="js/hrs.ui.holiday.js"></script>
	<script src="js/hrs.ui.main.js"></script>
</head>

<body>

<div id="wrapper">

	<div id="fixed-bar">
		<ul id="header">
			<li class="date">Dia</li>
			<li class="begin-dayT">Entrada</li>
			<li class="start-lunchT">Ida almoço</li>
			<li class="end-lunchT">Volta almoço</li>
			<li class="end-dayT">Saída</li>
			<li class="vpn-cell">Extra</li>
			<li class="all-workedT">Total</li>
			<li class="lunchT">Almoço</li>
			<li class="extraT">B.H.<li>
			<li class="is-ausentT">Ausente</li>
			<li class="noteT">Opções</li>
		</ul>

		<ul id="menu">
			<li> <a href="#sobre" class="open-lightbox" id="about-button">Sobre</a> </li>
			<!-- <li> <a href="#export-pdf" class="export-pdf">PDF</a> </li> -->
			<li> <a href="#configuration" class="open-lightbox">Configurações</a> </li>
			<li> <a href="#holidays" class="open-lightbox">Feriados</a> </li>
			<li> <a href="#export" id="link-export" class="open-lightbox">Exportar</a> </li>
			<li> <a href="#import-data" id="import-data" class="last">Importar</a> </li>
		</ul>
	</div>
	
	<div class="rightCol general-information">
		<div id="aditional-information">
			<h2>Expediente (Hoje)</h2>
			
			<div class="line">
				<div class="unit label" style="width: 120px;">Saída estimada: </div>
				<div id="proxSaidaExtimada" class="unit information small"></div> 
			</div>
			<div class="line last-line">
				<div class="unit label" style="width: 120px;" id="saidaTimeLabel">Tempo até saída: </div>
				<div id="proxSaidaTimer" class="unit information small"></div> 
			</div>
		</div>
		
		<div id="aditional-information" class="intervaloAlmoco">
			<h2>Intervalo (Hoje)</h2>
			<div class="line">
				<div class="unit label" style="width: 120px;">Saída estimada: </div>
				<div id="saidaAlmocoEstimada" class="unit information small"></div> 
			</div>
			<div class="line">
				<div class="unit label" style="width: 120px;">Saída real: </div>
				<div id="saidaAlmocoReal" class="unit information small"></div> 
			</div>
			<div class="line">
				<div class="unit label" style="width: 120px;">Retorno estimado: </div>
				<div id="retornoAlmoco" class="unit information small"></div> 
			</div>
			<div class="line">
				<div class="unit label" style="width: 120px;">Retorno Real: </div>
				<div id="retornoAlmocoReal" class="unit information small"></div> 
			</div>
			<div class="line last-line">
				<div class="unit label" style="width: 120px;" id="retornoAlmocoTimerLabel">Tempo até retorno: </div>
				<div id="retornoAlmocoTimer" class="unit information small"></div> 
			</div>
		</div>
		
		<h2>Informações consolidadas</h2>
		
		<div class="line last-line">
			<div class="unit label">Horas extras: </div>
			<div id="extra" class="unit information"></div> 
		</div>
		

		<h2>Informações do mês</h2>
		
		<div class="line">
			<div class="unit label">Mês: </div> 
			<div class="unit information small" id="month-name"></div>
		</div>
		
		<div class="line">
			<div class="unit label">Horas extras: </div> 
			<div class="unit information small" id="extra-month"></div>
		</div>
		
		<div class="line btImportMonth" style="text-align: center; padding-top: 10px; padding-left: 10px; padding-right: 10px; padding-bottom: 10px; width: 400px;">
			<input type="button" id="importMonth" value="Importar mês (Sistema Ahgora)"/>
		</div>
		
		<div class="line" style="text-align: center; padding-left: 10px; padding-right: 10px; padding-bottom: 20px; width: 400px; margin-top: 10px; border-bottom: 1px dotted #666;"">
			<input type="button" class="" value="Ver mês anterior" id="prev-month" />
			<input type="button" id="current-month" value="Ver mês atual"/>
			<input type="button" value="Ver próximo mês" id="next-month" />
		</div>
		
		<div id="legend">
			<h2>Legenda</h2>
			
			<div class="last-line">
				<table id="legend-table">
					<tr>
						<td class="color"><div class="commom_day"></div></td>
						<td>Dia comum</td>
						<td class="weekend color"><div class="weekend"></div></td>
						<td>Final de semana</td>
						<td class="holiday color"></td>
						<td>Feriado</td>
					</tr>
				</table>
			</div>
		</div>

		<div id="aditional-information">
			<h2>Informações adicionais</h2>
			<!--
			<div class="line">
				<div class="unit label">Horário médio de entrada: </div> 
				<div class="unit information small" id="entrance-avg"></div>
			</div>

			<div class="line">
				<div class="unit label">Horário médio de saída: </div> 
				<div class="unit information small" id="exit-avg"></div>
			</div>
			-->
			<div class="line" id="positive-days">
				<div class="unit label">Qtde. de dias que você pode tirar: </div> 
				<div class="unit information small" id="days-off"></div>
			</div>

			<div class="line hide" id="negative-days">
				<div class="unit label">Qtde. de dias que você está devendo: </div> 
				<div class="unit information small negative-hours" id="days-to-pay"></div>
			</div>

			<div class="line last-line">
				<div class="unit label">Qtde. de dias que você se ausentou: </div> 
				<div class="unit information small" id="ausent-days"></div>
			</div>
		</div>
	</div>

	<div class="leftCol main-info">
		<table id="main-table">
			<tr id="printable-header" class="fixed-row">
				<th colspan="2">Dia</th>
				<th>Entrada</th>
				<th>Ida almoço</th>
				<th>Volta almoço</th>
				<th>Saída</th>
				<th>Remoto</th>
				<th>Total</th>
				<th>Almoço</th>
				<th>Extra</th>
				<th>Obs</th>
				<th>OPTO</th>
				<th class="is-ausent" colspan="2">Ausente</th>
			</tr>
			<tr id="row-template" class="fixed-row">
				<td class="day_date">{data}</td>
				<td class="day_week">{diaSemana}</td>
				<td class="begin-day"><input type="text" value="{entrada}" class="start" /></td>
				<td class="start-lunch"><input type="text" value="{ida_almoco}" class="lunch-start" /></td>
				<td class="end-lunch"><input type="text" value="{volta_almoco}" class="lunch-end" /></td>
				<td class="end-day"><input type="text" value="{saida}" class="end" placeholder="{expectedExit}" /></td>
				<td class="vpn-cell"><input type="text" value="{vpn}" class="vpn" /></td>
				<td class="total all-worked">{total}</td>
				<td class="almoco lunch">{almoco}</td>
				<td class="excedente extra">{excedente}</td>
				<td>
					<input type="checkbox" value="S" class="ausent" {checked} />
				</td>
				<td class="obs_cell note">
					<div class="obs">{obs}</div>
					<a href="#view-full-obs" class="view-full-obs {cssObsPreenchida}" title="{obs}"></a>
				</td>
			    <td style="border-right: 1px solid #ccc; padding: 5px; cursor: pointer;">
					<a id="{data}" >
						<img src="res/img/oponto.png" id="ref{data}" onClick="opontoCalcs('{data}');" title="Informações para OPONTO"/>
					</a>
				</td>
				<td style="border-right: 1px solid #ccc; padding: 5px; cursor: pointer;">
					<div class="upDayOn">
						<a id="{data}" >
							<img src="res/img/progress.png" id="ref{data}" onClick="updateDay('{data}');" title="Atualizar/Importar este dia"/>
						</a>
					</div>
					<div class="hiddenObj upDayOff">
						<img src="res/img/offimg.png" title="Importação de batidas desativada. Verifique suas Configurações."/>
					</div>
				</td>
			</tr>
		</table>
		<div id="box-obs">
			<a href="#close" class="close-obs">x</a>
			<textarea class="obs">{obs}</textarea>
		</div>

	</div>

	<input type="file" id="inputfile-import-data" name="arquivos" />

	<div id="configuration" class="lightbox">
		<!-- <a href="#close" class="close close-button" id="closeSettings">x</a> -->
		
		<h2>Configurações</h2>
		
		<div class="line">
			<label class="unit size1of3">Carga de trabalho diária: </label> 
			<input type="number" step="0.01" min="0" id="total-work" class="size2of3 lastUnit" />
		</div>
		<div class="line"> 
			<label class="unit size1of3">Tempo de almoço padrão: </label> 
			<input type="number" min="0" step="0.25" id="lunch-time" class="size2of3 lastUnit" />
		</div>
		<div class="line"> 
			<label class="unit size1of3">Saldo de horas inicial: </label> 
			<input type="number" min="0" step="0.1" id="initial-balance" class="size2of3 lastUnit" />
		</div>
		<div class="line"> 
			<label class="unit size1of3">Controlar saldo a partir de: </label> 
			<input type="text" id="control-since" class="size2of3 lastUnit" />
		</div>
		<div class="line"> 
			<input type="checkbox" class="utilDay" value="1" id="permAhgora"/> Importar Batidas do Sistema Ahgora
		</div>
		<div class="line"> 
			<input type="checkbox" class="utilDay" value="1" id="permNotif"/> Utilizar Notificações
		</div>
		<!--  
		<div class="line"> 
			<input type="checkbox" class="utilDay" value="1" id="permOponto"/> Integrar com sistema OPONTO
		</div>
		-->
		<br/>
		<div class="line utilDays"> 
			<label class="unit size1of3"><strong>Dias com expediente:</strong></label>
		</div>
		<br/>
		<div class="line utilDays"> 
			<input type="checkbox" class="utilDay" value="1" /> 2ª
			<input type="checkbox" class="utilDay" value="2" /> 3ª
			<input type="checkbox" class="utilDay" value="3" /> 4ª
			<input type="checkbox" class="utilDay" value="4" /> 5ª
			<input type="checkbox" class="utilDay" value="5" /> 6ª
			<input type="checkbox" class="utilDay" value="6" /> Sábado
			<input type="checkbox" class="utilDay" value="0" /> Domingo
		</div>
		
		<div id="showAhgora">
			<h2>Integração Ahgora</h2>
	
			<div class="line"> 
				<label class="unit size1of3">Matrícula: </label> 
				<input type="number" min="0" step="0.1" id="matricula" class="size2of3 lastUnit" />
			</div>
			<div class="line"> 
				<label class="unit size1of3">Senha: </label> 
				<input type="password" min="0" step="0.1" id="senha" class="size2of3 lastUnit" />
			</div>
			<div class="line"> 
				<label class="unit size1of3">Empresa: </label> 
				<input type="text" min="0" step="0.1" id="empresa" class="size2of3 lastUnit" />
			</div>
		</div>
		
		<div id="showNotif">
			<h2>Notificações</h2>
			<div class="line"> 
				<input type="button" id="revisarPermissoes" value="Checar Permissões" />
			</div>
		</div>
		<div class="center">
			<input type="button" class="close" value="Fechar" id="closeSettings" />
		</div>
	</div>
	
	<div id="holidays" class="lightbox">
		<h2>Editar feriados</h2>
		<a href="#close" class="close close-button">x</a>
		
		<div id="holidays-list-container">
			<table id="holidays-list">
				<tr>
					<th>Data</th>
					<th>Descrição</th>
				</tr>
				<tr id="holiday_template">
					<td><input type="text" class="holiday_date" /></td>
					<td><input type="text" class="holiday_description" /></td>
				</tr>
			</table>
		</div>
		
		<div class="center">
			<input type="button" class="close center" value="Fechar" />
		</div>
	</div>
	
	<div id="export" class="lightbox">
		<h2>Exportar dados</h2>
		<a href="#close" class="close close-button">x</a>
		
		Salve o conteúdo abaixo em um arquivo, que pode ser reimportado novamente.
		
		<textarea id="output-export"></textarea>

	</div>
	
	<div id="confirm-import" class="lightbox">
		<h2>Importar dados</h2>
		<a href="#close" class="close close-button">x</a>
		
		Deseja sobrescrever suas informações pelas informações do arquivo a ser importado?
		
		<div class="center">
			<input type="button" id="proced-import" class="close center" value="Confirmar" />
			<input type="button" class="close center" value="Cancelar" />
		</div>
	</div> 
	
	<div id="about-lightbox" class="lightbox">
		<h2>Sobre</h2>
		
		<div class="left">
			Este aplicativo foi baseado no projeto de Renato Menegasso de um App do Google Chrome para controle de horas de trabalho.<br/>
			<br/>
			O projeto original pode ser encontrado em:  <br/>
			- https://github.com/renatomenegasso/Controle-ponto<br/>
			<br/>
			A extensão original está publicada na Chrome Webstore em: <br/>
			- https://chrome.google.com/webstore/detail/controle-de-banco-de-hora/pfifkcaekcnananahibcebeeknnlfhna?utm_source=chrome-ntp-icon
			<br/>
		</div>
		<h2>Sobre esta versão</h2>
		<div class="left">
			v1.17:
			Correções de bugs com as notificações; Implementando data inicial para cálculo dos saldos do banco de horas;<br/>
			<br/>
			Desenvolvedores:<br/>
			Eder Franco (efranco23@gmail.com)<br/>
			<br/>
			Grupo de Testes:<br/>
			Jean Alisson (jaon82@gmail.com), Marcus Amaral (m4rkux@gmail.com), Leandro Araújo (leandro.cesar.ma@gmail.com), Luiz Franco (lmmfranco@gmail.com), Herbert Ribeiro (herbert.rlopes@gmail.com), Renan Bezerra (renankcb@gmail.com) e  Igor Martins (igor.martins@gmail.com).			<br/>
			<br/>
		</div>
		<div align="center">
			<input type="button" class="close center" value="Close" />
		</div>

	</div> 
	
	<div id="perform-update" class="lightbox">
		<h2>Importação de dados</h2>
		<div style="display: table;">
			<div style="display: table-cell; float: left;">
				<img src="res/img/loading.gif"/>
			</div>
			<div style="display: table-cell; float: left; padding-top: 8px;">
				Importando dados do sistema Ahgora...
			</div>
		</div>
	</div> 
	
	<div id="error-update" class="lightbox">
		<h2>Importação de dados</h2>
		<a href="#close" class="close close-button">x</a>
		<p>
			<img src="res/img/alerta.gif"/> Não foi possível realizar a importação dos dados.<br/>
			Verifique as possíveis causas abaixo, e tente novamente:
			<ul>
				<li>Conexão com a internet indisponível;</li>
				<li>Bloqueio para acesso ao servidor em https://khi.by;</li>
				<li>Dados de acesso não foram informados nas Configurações;</li>
			</ul>
		</p>
	</div> 
	
	<div id="msg-lightbox" class="lightbox">
		<h2>Importação de dados</h2>
		<a href="#close" class="close close-button">x</a>
		<p><img src="res/img/alerta.gif"/> <span id="msg-lightbox-content">...</span></p>
	</div> 
	
	<div id="sucess-update" class="lightbox">
		<h2>Importação de dados</h2>
		<!-- <a href="#close" class="close close-button">x</a> -->
		<div style="display: table;">
			<div style="display: table-cell; float: left;">
				<img src="res/img/loading.gif"/>
			</div>
			<div style="display: table-cell; float: left; padding-top: 8px;">
				Importando dados do sistema Ahgora...
			</div>
		</div>
	</div> 

	<ul id="input-context-menu" class="context-menu">
		<li id="insert-current-time">Inserir hora atual</li>
		<li>Cancelar</li>
	</ul>
</div>
<audio id="alarm-sound">
	<source src="res/sound/alarm.wav" type="audio/wav" />
</audio> 
<audio id="alarm-sound-letsgo">
	<source src="res/sound/letsgo.wav" type="audio/wav" />
</audio> 
<audio id="alarm-sound-chimes">
	<source src="res/sound/chimes.wav" type="audio/wav" />
</audio> 
<audio id="alarm-sound-thirty">
	<source src="res/sound/thirty.mp3" type="audio/mp3" />
</audio> 
<audio id="alarm-sound-twenty">
	<source src="res/sound/twenty.mp3" type="audio/mp3" />
</audio> 
<audio id="alarm-sound-ten">
	<source src="res/sound/ten.mp3" type="audio/mp3" />
</audio> 
<audio id="alarm-sound-five">
	<source src="res/sound/five.mp3" type="audio/mp3" />
</audio> 
<audio id="alarm-sound-tardis">
	<source src="res/sound/tardis_sound.mp3" type="audio/mp3" />
</audio> 
<!--

SOBRE:

Este aplicativo foi baseado no projeto de Renato Menegasso de um App do Google Chrome para controle de horas de trabalho.

O projeto original pode ser encontrado em:  
- https://github.com/renatomenegasso/Controle-ponto

A extensão original está publicada na Chrome Webstore em: 
- https://chrome.google.com/webstore/detail/controle-de-banco-de-hora/pfifkcaekcnananahibcebeeknnlfhna?utm_source=chrome-ntp-icon


SOBRE ESTA VERSÃO:

Foram implementadas notificações para desktop, diversas melhorias 
nos cálculos de horários de entrada e saída, integração com o 
sistema Ahgora e etc.

Desenvolvedores:
Eder Franco - efranco23@gmail.com 

Grupo de Testes:
Jean Alisson - jaon82@gmail.com 
Marcus Amaral - m4rkux@gmail.com 
Leandro Araújo - leandro.cesar.ma@gmail.com
Luiz Marcelo Martins Franco - lmmfranco@gmail.com
Herbert Ribeiro - herbert.rlopes@gmail.com
Renan Bezerra - renankcb@gmail.com
Igor Martins - igor.martins@gmail.com

Observação:
Este projeto é mantido por um fã de Doctor Who (entendedores entenderão).

          -___________-
         (/     _     \)
         /_____(O)_____\
         // / / | \ \ \\
        =================
        // / | | | | \ \\      "EXTERMINATE! EXTERMINATE!"
       ===================    /
      //// || || || || \\\\
      |||| || || || || ||||
     /---___-----------,---\
     |  /   \         -o-  |
     /  \___/          '   \
     +---------------------+
    /_   __    ___    __   _\
   (__) (__)  (___)  (__) (__)
   |_    __    ___    __    _|                   #     Open the
  (__)  (__)  (___)  (__)  (__)               ------- /doors,
  /_    ___    ___    ___    _\               |-----|  Doctor, I
 (__)  (___)  (___)  (___)  (__)              |II|II|  think there's
 |_     ___    ___    ___     _|              |II|II|  someone
(__)   (___)  (___)  (___)   (__)             |II|II|  there....
/_______________________________\             |II|II|
-->
</body>

</html>